<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Saturday Programmer]]></title>
  <link href="http://torub.github.com/atom.xml" rel="self"/>
  <link href="http://torub.github.com/"/>
  <updated>2013-05-06T23:02:43+09:00</updated>
  <id>http://torub.github.com/</id>
  <author>
    <name><![CDATA[torub]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[WebRTCサンプル]]></title>
    <link href="http://torub.github.com/blog/2013/05/06/webrtc/"/>
    <updated>2013-05-06T04:05:00+09:00</updated>
    <id>http://torub.github.com/blog/2013/05/06/webrtc</id>
    <content type="html"><![CDATA[<p>WebRTCのサンプルを動かしてみたのでまとめます。</p>

<h3><a href="http://dl.dropboxusercontent.com/u/321302/html5/webrtc.html">カメラから映像を取り込み、そのまま流すのみのサンプル</a></h3>

<p>2013/5/6現在、MacのGoogle Chorome Version 26では以下を読み込んで動作しました。</p>

<figure class='code'><figcaption><span> (webrtc.html)</span> <a href='http://torub.github.com/downloads/code/webrtc.html'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;ja&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;title&gt;</span>WebRTC<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-1.9.1.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;video</span> <span class="na">id=</span><span class="s">&quot;myvideo&quot;</span> <span class="na">width=</span><span class="s">&quot;320&quot;</span> <span class="na">height=</span><span class="s">&quot;240&quot;</span> <span class="na">autoplay</span> <span class="na">style=</span><span class="s">&quot;border:1px solid black&quot;</span><span class="nt">&gt;&lt;/video&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">navigator</span><span class="p">.</span><span class="nx">webkitGetUserMedia</span><span class="p">({</span><span class="nx">video</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="nx">audio</span><span class="o">:</span><span class="kc">true</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">myvideo</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#myvideo&quot;</span><span class="p">).</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>          <span class="nx">myvideo</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">webkitURL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">stream</span><span class="p">);</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>    <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Androidでは、version26を利用し、アドレスバーに
<code>about:flags</code>と入力後、以下の「WebRTCを有効にする」を選択してChromeを再起動することで
実行が可能になります。</p>

<p><img src="http://torub.github.com/images/cap/webrtc_android.png"></p>

<p>iOSは現状ではSafari, Chromeとも動作しない模様です。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopressのいろいろ]]></title>
    <link href="http://torub.github.com/blog/2013/05/06/octopress-config/"/>
    <updated>2013-05-06T03:02:00+09:00</updated>
    <id>http://torub.github.com/blog/2013/05/06/octopress-config</id>
    <content type="html"><![CDATA[<p>Octopressの設定など色々まとめていきます。<br/>
設定追加毎に記事も追加していきます。</p>

<ul>
<li><a href="#include_code">ソースコードの引用</a></li>
<li><a href="#escape">特殊文字のエスケープ</a></li>
<li><a href="#image">画像貼り付け</a></li>
<li><a href="#publish">記事の非公開設定</a></li>
</ul>


<!-- more -->


<h2><a name="include_code"></a>ソースコードの引用</h2>

<p>以下の通り記載することで引用が可能です</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{% include_code [title] [lang:language] path/to/file %}</span></code></pre></td></tr></table></div></figure>


<p>ファイルは、<code>source/downloads/code</code> が基本のパスのようです。
例えばindex.htmlを、<code>source/downloads/code/</code> に置いて</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{% include_code index.html %}</span></code></pre></td></tr></table></div></figure>


<p>と書くと、以下の通り出力されます。</p>

<figure class='code'><figcaption><span> (index.html)</span> <a href='http://torub.github.com/downloads/code/index.html'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>---
</span><span class='line'>layout: default
</span><span class='line'>---
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;blog-index&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  {% assign index = true %}
</span><span class='line'>  {% for post in paginator.posts %}
</span><span class='line'>  {% assign content = post.content %}
</span><span class='line'>    <span class="nt">&lt;article&gt;</span>
</span><span class='line'>      {% include article.html %}
</span><span class='line'>    <span class="nt">&lt;/article&gt;</span>
</span><span class='line'>  {% endfor %}
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;pagination&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    {% if paginator.next_page %}
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;prev&quot;</span> <span class="na">href=</span><span class="s">&quot;{{paginator.next_page}}&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;larr;</span> Older<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>    {% endif %}
</span><span class='line'>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/blog/archives&quot;</span><span class="nt">&gt;</span>Blog Archives<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>    {% if paginator.previous_page %}
</span><span class='line'>    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;next&quot;</span> <span class="na">href=</span><span class="s">&quot;{{paginator.previous_page}}&quot;</span><span class="nt">&gt;</span>Newer <span class="ni">&amp;rarr;</span><span class="nt">&lt;/a&gt;</span>
</span><span class='line'>    {% endif %}
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  {% if site.blog_index_asides.size %}
</span><span class='line'>    {% include_array blog_index_asides %}
</span><span class='line'>  {% else %}
</span><span class='line'>    {% include_array default_asides %}
</span><span class='line'>  {% endif %}
</span><span class='line'><span class="nt">&lt;/aside&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="http://octopress.org/docs/plugins/include-code/">公式の説明ページ</a></li>
</ul>


<h2><a name="escape"></a>特殊文字のエスケープ</h2>

<p>include_codeなど、自動的にoctopressによって展開される文字を
そのまま出力させるには、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{% raw %} 
</span><span class='line'>と 
</span><span class='line'>{％ endraw ％}</span></code></pre></td></tr></table></div></figure>


<p>で囲むことでエスケープして文字を出力可能です。
(endrawの％部分は半角に直す必要があり。)</p>

<h2><a name="image"></a>画像貼り付け</h2>

<p>ソースコードとほぼ同様で、以下の通り記載することで引用が可能です</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{% img [class names] /path/to/image [width] [height] [title text [alt text]] %}</span></code></pre></td></tr></table></div></figure>


<p>画像ファイルのトップディレクトリは、<code>source/</code> のようです。例えば、<code>source/images/search.png</code>というファイルがデフォルトでありますが、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{% img /images/search.png %}</span></code></pre></td></tr></table></div></figure>


<p>と記載することで以下の通り表示されます。</p>

<p><img class="[class names]" src="http://torub.github.com/images/search.png"></p>

<ul>
<li><a href="http://octopress.org/docs/plugins/image-tag/">公式の説明ページ</a></li>
</ul>


<h2><a name="publish"></a>記事の非公開</h2>

<p><code>rake new_post['hogehoge']</code> としてmarkdownファイルを作ったあとも、
すぐには公開したくない場合、記事作成時のファイルの設定部分に以下の通り、
<code>published: false</code>を追加することで対応可能です。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>---
</span><span class='line'>layout: post
</span><span class='line'>title: "hogehoge"
</span><span class='line'>date: 2013-05-06 22:46
</span><span class='line'>published: false
</span><span class='line'>comments: true
</span><span class='line'>categories: phonegap
</span><span class='line'>---</span></code></pre></td></tr></table></div></figure>


<p>編集が完了した後、<code>published: true</code>として<code>rake gen_deploy</code>すれば記事が公開されます。</p>

<p>※ちなみに、publishをfalseにしても、プレビューでは表示されます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopressの導入]]></title>
    <link href="http://torub.github.com/blog/2013/05/04/octopress/"/>
    <updated>2013-05-04T03:37:00+09:00</updated>
    <id>http://torub.github.com/blog/2013/05/04/octopress</id>
    <content type="html"><![CDATA[<p>GitHubを初めるにあたって、Octopressを導入したのでその方法についてまとめました。</p>

<!-- more -->


<p>以下4点、順番に説明します。</p>

<ol>
<li><a href="#ruby_install">Rubyインストール</a></li>
<li><a href="#github_pages">GitHub Pagesレポジトリ作成</a></li>
<li><a href="#octopress">Octopressインストール</a></li>
<li><a href="#newpost">記事作成</a></li>
</ol>


<h2><a name="ruby_install"></a>1. Rubyインストール</h2>

<p>私の環境は、Mac OS 10.8.3 ですが、デフォルトのRubyは1.8.7が入っていました。
Octopressのインストールには1.9.3以上が必要とのことなので、
rvmというRubyのバージョン管理用ソフトをインストールします。</p>

<h3>RVMとRuby1.9.3のインストール</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% curl -L https://get.rvm.io | bash -s stable --ruby
</span><span class='line'>% rvm list known</span></code></pre></td></tr></table></div></figure>


<p>とすることで、インストール可能なRubyのバージョンのリストが表示されます。</p>

<p>色々とネット上の記事を見ていると、XCode4.2の付属のLLVM gccではコンパイル不可らしく、
別途gccをダウンロードした上で作業をした等の記載を見つけましたが、
ここでは、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rvm autolibs enable</span></code></pre></td></tr></table></div></figure>


<p>で依存関係を自動で解決するようにし、その後、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rvm install 1.9.3-p392</span></code></pre></td></tr></table></div></figure>


<p>とすることで、問題無くインストールが進み、利用可能となりました。
(自分の環境ではpatchレベルの指定も必要でした。)</p>

<h3>RVMの設定</h3>

<p>以下の通りで利用バージョンが設定できます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rvm use 1.9.3 
</span><span class='line'>% ruby -v
</span><span class='line'>ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.3.0]</span></code></pre></td></tr></table></div></figure>


<p><code>rvm use ...</code>の実行後にバージョンを戻すときは、<code>% rvm reset</code>とし、
デフォルトの使用バージョンを変える場合は、<code>% rvm --default 1.9.3</code>とすればOKです。</p>

<p>なお、各フォルダ毎に、.rvmrcファイルを作成して<code>rvm use ...</code>と記載しておくことで、
そのフォルダでのrubyの実行バージョンを制御できる模様です。</p>

<h2><a name="github_pages"></a>2. GitHub Pagesレポジトリ作成</h2>

<p>これは簡単で、GitHubに USERNAME.github.comのレポジトリを作成するのみです。
作成後、しばらくたつと、
http://USERNAME.github.com でアクセスできるようになります。</p>

<p>ドメインの指定等も可能みたいだけど、とりあえず省略です。</p>

<h2><a name="octopress"></a>3. Octopressインストール</h2>

<p>以下の通りでインストールできます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>% cd octopress</span></code></pre></td></tr></table></div></figure>


<p>※octopressディレクトリには、.rvmrcが設置してあり、自動で1.9.3を使うように設定できます</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% sudo gem install bundler
</span><span class='line'>% sudo bundle install 
</span><span class='line'>% rake install
</span><span class='line'>% rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>ここまで来ると、Enter the read/write url for your repository と聞かれるので、
git@github.com:USERNAME/USERNAME.github.com.git と入力します。その後、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rake generate
</span><span class='line'>% rake deploy</span></code></pre></td></tr></table></div></figure>


<p>とすることで、USERNAME.github.comにアクセス可能になります。</p>

<h2><a name="newpost"></a> 記事の投稿</h2>

<p>インストール後、以下コマンドで新規記事が作成できます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rake new_post['post title']</span></code></pre></td></tr></table></div></figure>


<p>post title部分がURLになる(post-titleになる)ため、英語の必要があります。
ファイルは、source/_posts/yyyy-mm-dd-post-title.markdown が自動作成されるので、
markdown形式で編集することで記事を作成できます。</p>

<p>例えばこの記事の場合、markdownファイルの先頭は以下の通り。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>---
</span><span class='line'>layout: post
</span><span class='line'>title: "Octopressの導入"
</span><span class='line'>date: 2013-05-04 03:37
</span><span class='line'>comments: true
</span><span class='line'>categories: octopress
</span><span class='line'>---</span></code></pre></td></tr></table></div></figure>


<p>title部分は、最初はpost titleが入るけど、後から日本語に変更が可能です。
この先頭の後は、普通にmarkdownで書くのみです。</p>

<p>書いた後、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rake preview</span></code></pre></td></tr></table></div></figure>


<p>とすることでhttp://localhost:4000/ で記載内容を確認できます。</p>

<p>確認できたら、</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% rake gen_deploy</span></code></pre></td></tr></table></div></figure>


<p>とすることでGithubに反映されます。(rake generate; rake deployの省略形のようです)<br/>
また、不要な記事は、markdownファイルを削除してから
再度gen_deployを実行することで削除可能です。</p>

<p>記事投稿をまとめると、</p>

<ul>
<li><code>rake new_post</code>でsourceフォルダにmarkdownファイルが作られ、</li>
<li><code>rake generate</code>でsourceフォルダからpublicフォルダにHTML形式が出力され、</li>
<li><code>rake deploy</code>でpublicフォルダから_deployフォルダにコピーされると共に、
GitHub側にも反映</li>
</ul>


<p>という流れです。</p>

<p>設定はおいおいやるとして、ひとまずこれでブログとして公開することができました。</p>

<h3>参考にさせて頂いたサイト</h3>

<ul>
<li><a href="http://octopress.org/">Octopress公式</a></li>
<li><a href="http://www.creativegear.jp/2012/12/29/octopress-post/">GitHubとOctopressで作るプログラマ向けブログ</a></li>
<li><a href="http://qiita.com/items/34e0ff2c369899169f90">Ruby1.9.3-p286インストール(RVM)</a></li>
<li><a href="http://spring-mt.tumblr.com/post/18486101350/ruby-rvm-install">rubyをrvmを使ってinstallする</a></li>
<li><a href="http://www.sankitch.me/blog/2012/05/05/build-octopress-on-github-dropbox/">Octopress + Github Pages + Dropbox でブログを構築</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
